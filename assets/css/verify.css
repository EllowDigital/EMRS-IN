/* Inter font */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

:root {
    --bs-font-sans-serif: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --bs-primary-rgb: 13, 110, 253;
    --bs-border-radius: 0.5rem;
    --bs-border-radius-lg: 0.75rem;
    --bs-border-radius-pill: 50rem;
    --app-bg: #f8f9fa;
}

body {
    background-color: var(--app-bg);
}

/* --- App Header --- */
.app-header {
    background-color: #fff;
    border-bottom: 1px solid #e9ecef;
}

/* Header responsive tweaks for verify page */
.app-header .btn { border-radius: 8px; }
.app-header h1 { display: flex; align-items: center; gap: 0.5rem; }
@media (max-width: 576px) {
    .app-header .btn.btn-outline-primary { padding: 0.35rem 0.5rem; }
    .app-header .btn.btn-outline-primary span { display: none; }
}

/* Mobile slide-out nav (same styling as admin) */
.mobile-nav-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1040; transition: opacity 220ms ease; }
.mobile-nav-backdrop.d-none { display: none; }
.mobile-nav { position: fixed; top: 0; left: -320px; width: 280px; height: 100%; background: #fff; z-index: 1050; box-shadow: 6px 0 24px rgba(0,0,0,0.12); transition: transform 260ms cubic-bezier(.2,.8,.2,1); transform: translateX(0); }
.mobile-nav.open { transform: translateX(320px); left: 0; }
.mobile-nav-inner { padding: 1rem; display:flex; flex-direction:column; height:100%; }
.mobile-nav-header { border-bottom: 1px solid #eee; padding-bottom: 0.5rem; }
.mobile-nav .mobile-nav-link { display:block; padding: 0.65rem 0.25rem; color: #07203a; text-decoration:none; font-weight:600; }
.mobile-nav .mobile-nav-link:hover { background: #f4f7fb; color: var(--bs-primary); }
.mobile-nav .btn { border-radius: 6px; }

/* Focus outline for accessible focus trap */
.mobile-nav a:focus, .mobile-nav button:focus { outline: 3px solid rgba(0,102,204,0.18); outline-offset: 2px; }

/* Ripple micro-interaction */
.ripple { position: relative; overflow: hidden; }
.ripple .ripple-effect { position: absolute; border-radius: 50%; transform: scale(0); background: rgba(255,255,255,0.6); animation: ripple 600ms linear; pointer-events:none; }
@keyframes ripple { to { transform: scale(2.5); opacity: 0; } }

/* --- Card Container --- */
.main-card {
    min-height: 75vh;
}

@media (min-width: 992px) {
    .main-card {
        min-height: auto;
    }
}

        /* --- BUG FIX: Move top clear button to be relative to its content block, not absolutely within the card-body. --- */
        #clear-btn-top {
            /* This button is now part of the status badge flex container */
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }

        #clear-btn-top:hover {
            opacity: 1;
        }

        #results-section {
            position: relative;
            /* Make it a positioning context for the top close button */
        }/* --- Toast Notification Container --- */
#message-box-container {
    position: fixed;
    top: 1rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1080;
    width: 90%;
    max-width: 600px;
}

.alert {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

/* --- Main Content Wrapper --- */
.content-wrapper {
    padding-top: 2rem;
    padding-bottom: 2rem;
}

/* --- Section Styling & Transitions --- */
#scanner-section,
#results-section {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    pointer-events: none;
    display: none;
}

/* --- UI State Control --- */
body[data-ui-state="lookup"] #scanner-section,
body[data-ui-state="scanning"] #scanner-section,
body[data-ui-state="result"] #results-section,
body[data-ui-state="loading"] #scanner-section {
    display: block;
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

body[data-ui-state="loading"] #manual-lookup-form {
    opacity: 0.5;
    pointer-events: none;
}

/* --- Staff Login Modal --- */
#staff-login-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

body[data-ui-state="login"] #staff-login-modal {
    opacity: 1;
    pointer-events: auto;
}

.login-card {
    background: #fff;
    padding: 2rem;
    border-radius: var(--bs-border-radius-lg);
    width: 90%;
    max-width: 400px;
    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.2);
    transform: scale(0.95);
    transition: transform 0.3s ease;
}

body[data-ui-state="login"] .login-card {
    transform: scale(1);
}

/* Hide main content when login is active */
body[data-ui-state="login"] .app-header,
body[data-ui-state="login"] .content-wrapper {
    display: none;
}


/* --- QR Reader Styles --- */
#qr-reader-container {
    max-width: 500px;
    margin: 0 auto 1rem;
    position: relative;
    overflow: hidden;
    border-radius: var(--bs-border-radius-lg);
    background: #000;
    border: 4px solid #fff;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

#qr-reader {
    width: 100%;
    border: none;
}

#qr-reader video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Active Scan Line Animation */
#qr-reader-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 10px;
    right: 10px;
    height: 3px;
    background: rgba(var(--bs-primary-rgb), 0.7);
    box-shadow: 0 0 10px rgba(var(--bs-primary-rgb), 0.7);
    border-radius: 3px;
    transform: translateY(-100%);
    animation: scanline 2.5s ease-in-out infinite alternate;
    display: none;
}

body[data-ui-state="scanning"] #qr-reader-container::after {
    display: block;
}

@keyframes scanline {
    0% {
        transform: translateY(0%);
    }

    100% {
        transform: translateY(calc(100% - 3px));
    }
}

/* --- Button Transitions --- */
.btn {
    transition: transform 0.15s ease-out;
}

.btn:hover {
    transform: scale(1.02);
}

/* --- Attendee Result Card --- */
#result-status-badge {
    font-size: 1rem;
    font-weight: 600;
    padding: 0.5em 1em;
    border-radius: var(--bs-border-radius-pill);
    margin-bottom: -1.5rem;
    position: relative;
    z-index: 5;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

#result-avatar {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 50%;
    border: 4px solid #fff;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.epass-info-block {
    line-height: 1.7;
}

.epass-info-block p {
    margin-bottom: 0.5rem;
    font-size: 1rem;
}

/* --- Result Animations --- */
#results-section .animated {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}

#results-section.animate-in #result-status-badge {
    opacity: 1;
    transform: translateY(0);
    transition-delay: 0.05s;
}

#results-section.animate-in #result-avatar {
    opacity: 1;
    transform: translateY(0);
    transition-delay: 0.15s;
}

#results-section.animate-in #result-name {
    opacity: 1;
    transform: translateY(0);
    transition-delay: 0.25s;
}

#results-section.animate-in .epass-info-block {
    opacity: 1;
    transform: translateY(0);
    transition-delay: 0.35s;
}

#results-section.animate-in #checkin-btn,
#results-section.animate-in #clear-btn-bottom {
    opacity: 1;
    transform: translateY(0);
    transition-delay: 0.45s;
}

/* Heartbeat Animation (Unchanged) */
.heart {
    color: #e53935;
    animation: heartbeat 1.5s ease-in-out infinite;
    display: inline-block;
}

@keyframes heartbeat {

    0%,
    100% {
        transform: scale(1);
    }

    10%,
    30% {
        transform: scale(0.9);
    }

    20% {
        transform: scale(1.1);
    }
}
